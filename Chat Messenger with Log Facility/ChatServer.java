/////////////////////////////////////////////////////////////////////////
//
//  File Name   : ChatServer.java
//  Author      : Omkar Pramod Sudrik
//  Date        : 11/12/2026
//  Description : This program implements a simple TCP Chat Server.
//                It waits for a client connection on port 5100,
//                receives a message from the client and sends 
//                a response back to the client.
//
//  Concepts Used :
//      - Socket Programming
//      - TCP Communication
//      - Input/Output Streams
//      - BufferedReader & PrintStream
//
//  Platform    : Java (JDK 8+)
//
/////////////////////////////////////////////////////////////////////////


/////////////////////////////////////////////////////////////////////////
//
// Required Header Files
//
/////////////////////////////////////////////////////////////////////////

import java.io.*;
import java.net.*;


/////////////////////////////////////////////////////////////////////////
//
// Class Name : ChatServer
// Description: Accepts client connection and exchanges message
//
/////////////////////////////////////////////////////////////////////////

class ChatServer
{
    public static void main(String A[]) throws Exception
    {
        /////////////////////////////////////////////////////////////////////
        // Variable Declarations
        /////////////////////////////////////////////////////////////////////

        ServerSocket ssobj = null;
        Socket sobj = null;
        PrintStream pobj = null;
        BufferedReader bobj1 = null;
        BufferedReader bobj2 = null;
        String str = null;


        /////////////////////////////////////////////////////////////////////
        // Create Server Socket
        /////////////////////////////////////////////////////////////////////

        ssobj = new ServerSocket(5100);
        System.out.println("Server is waiting for client at port 5100...");


        /////////////////////////////////////////////////////////////////////
        // Accept Client Connection
        /////////////////////////////////////////////////////////////////////

        sobj = ssobj.accept();
        System.out.println("Client gets connected successfully");


        /////////////////////////////////////////////////////////////////////
        // Attach Input and Output Streams
        /////////////////////////////////////////////////////////////////////

        pobj = new PrintStream(sobj.getOutputStream());

        bobj1 = new BufferedReader(
                    new InputStreamReader(sobj.getInputStream()));

        bobj2 = new BufferedReader(
                    new InputStreamReader(System.in));


        /////////////////////////////////////////////////////////////////////
        // Receive Message from Client
        /////////////////////////////////////////////////////////////////////

        str = bobj1.readLine();
        System.out.println("Client says " + str);


        /////////////////////////////////////////////////////////////////////
        // Send Response to Client
        /////////////////////////////////////////////////////////////////////

        System.out.println("Enter message for client");
        str = bobj2.readLine();

        pobj.println(str);


        /////////////////////////////////////////////////////////////////////
        // Close Resources
        /////////////////////////////////////////////////////////////////////

        sobj.close();
        ssobj.close();
    }
}


/////////////////////////////////////////////////////////////////////////
//
// End of File
//
/////////////////////////////////////////////////////////////////////////
